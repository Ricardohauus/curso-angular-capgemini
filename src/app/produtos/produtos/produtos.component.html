<div class="container margem">
    <h1 class="text-center">Gestão de Produtos</h1>
    <hr />

    <div class="row">
        <!-- Lista de produtos -->

        <div class="col-md-6">
            <!-- Filtrando os produtos -->
            <div class="form-group">
                <label>Informe a descrição do Produto</label>
                <input type="text" #busca (keyup)="(0)" class="form-control" />
            </div>
            <ul class="list_group">
                <li *ngFor="let item of produtos | sublista: busca.value" (click)="selecionar(item)" class="list-group-item">
                    <a [class.selecionado]="item === produtoSelecionado" routerLink="/produtos">{{ item.descricao | uppercase }}</a
          >
        </li>
      </ul>
      <button type="button" (click)="novo()" class="btn btn-info">
        <span class="glyphicon glyphicon-plus"></span>
        Novo
      </button>
    </div>

    <!-- Formulário para inclusão de produtos -->
    <div *ngIf="produtoSelecionado; else blocoElse">
      <div class="form-row">
        <div class="col-md-6">
          <div class="form-group">
            <label for="codigo">ID:</label>
            <input
              disabled
              type="text"
              [(ngModel)]="produtoSelecionado._id"
              class="form-control"
              id="id"
              name="id"
            />
          </div>

          <div class="form-group">
            <label for="codigo">Código: </label>
            <input
              type="number"
              [(ngModel)]="produtoSelecionado.codigo"
              class="form-control"
              id="codigo"
              name="codigo"
            />
          </div>

          <div class="form-group">
            <label for="descricao">Descrição:</label>
            <input
              type="text"
              [(ngModel)]="produtoSelecionado.descricao"
              class="form-control"
              id="descricao"
              name="descricao"
            />
          </div>

          <div class="form-group">
            <label for="unidade">Unidade:</label>
            <input
              type="text"
              [(ngModel)]="produtoSelecionado.unidade"
              class="form-control"
              id="unidade"
              name="unidade"
            />
          </div>

          <div class="form-group">
            <label for="preco">Preço:</label>
            <input
              type="text"
              [(ngModel)]="produtoSelecionado.preco"
              class="form-control"
              id="preco"
              name="preco"
            />
          </div>

          <div class="form-group">
            <label for="categoria">Categoria:</label>
            <select
              [(ngModel)]="produtoSelecionado.categoria"
              name="categoria"
              id="categoria"
              class="form-control"
            >
              <option>INFORMATICA</option>
              <option>VESTUARIO</option>
              <option>ALIMENTACAO</option>
              <option>HIGIENE</option>
              <option>CONSTRUCAO</option>
            </select>
          </div>

          <div class="form-group col-md-6">
            <button
              type="button"
              (click)="incluir(produtoSelecionado)"
              class="btn btn-info btn-block"
            >
              <span class="glyphicon glyphicon-pencil"></span>
              {{ produtoSelecionado._id ? "Atualizar" : "Incluir" }}
            </button>
          </div>

          <div class="form-group col-md-6">
            <button
              type="button"
              (click)="deletar(produtoSelecionado)"
              class="btn btn-danger btn-block"
            >
              <span class="glyphicon glyphicon-trash"></span>
              Deletar
            </button>
          </div>
        </div>
      </div>
    </div>

    <ng-template #blocoElse>
      <div class="col-md-6">
        <span class="alert alert-info"
          >Selecionar um produto na lista, ou incluir novo produto</span
        >
      </div>
    </ng-template>
  </div>
</div>